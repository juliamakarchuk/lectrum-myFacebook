(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{110:function(t,e,n){},115:function(t,e,n){"use strict";n.r(e);var a=n(0),r=n.n(a),s=n(11),o=n.n(s),c=(n(60),n(1)),i=n(2),u=n(4),l=n(3),m=n(5),p=n(31),f=n(6),h=n.n(f),_=n(15),v=n(7),d=n(8),E=Object(a.createContext)(),O=E.Provider,b=E.Consumer,y=function(t){return function(e){function n(){return Object(c.a)(this,n),Object(u.a)(this,Object(l.a)(n).apply(this,arguments))}return Object(m.a)(n,e),Object(i.a)(n,[{key:"render",value:function(){var e=this;return r.a.createElement(b,null,function(n){return r.a.createElement(t,Object.assign({},n,e.props))})}}]),n}(a.Component)},j=n(14),k=n(22),g=n.n(k),S=n(16),N=n.n(S),w=n(49),L=n.n(w)()("https://lab.lectrum.io",{path:"/react/ws"}),P=y(function(t){function e(){var t,n;Object(c.a)(this,e);for(var a=arguments.length,r=new Array(a),s=0;s<a;s++)r[s]=arguments[s];return(n=Object(u.a)(this,(t=Object(l.a)(e)).call.apply(t,[this].concat(r)))).state={online:!1},n._animateStatusBarEnter=function(t){Object(d.fromTo)(t,1,{opacity:0},{opacity:1})},n}return Object(m.a)(e,t),Object(i.a)(e,[{key:"componentDidMount",value:function(){var t=this;L.on("connect",function(){t.setState({online:!0})}),L.on("disconnect",function(){t.setState({online:!1})})}},{key:"componentWillUnmount",value:function(){L.removeListener("connect"),L.removeListener("disconnect")}},{key:"render",value:function(){var t,e=this.props,n=e.avatar,a=e.currentUserFirstName,s=e.currentUserLastName,o=this.state.online,c=g()(N.a.status,(t={},Object(j.a)(t,N.a.online,o),Object(j.a)(t,N.a.offline,!o),t)),i=o?"Online":"Offline";return r.a.createElement(v.Transition,{in:!0,appear:!0,timeout:1e3,onEnter:this._animateStatusBarEnter},r.a.createElement("section",{className:N.a.statusBar},r.a.createElement("div",{className:c},r.a.createElement("div",null,i),r.a.createElement("span",null)),r.a.createElement("button",null,r.a.createElement("img",{src:n}),r.a.createElement("span",null," ",a," "),"\xa0",r.a.createElement("span",null," ",s," "))))}}]),e}(a.Component)),x=n(50),C=n.n(x),F=y(function(t){function e(){var t,n;Object(c.a)(this,e);for(var a=arguments.length,r=new Array(a),s=0;s<a;s++)r[s]=arguments[s];return(n=Object(u.a)(this,(t=Object(l.a)(e)).call.apply(t,[this].concat(r)))).state={comment:""},n._updateComment=function(t){n.setState({comment:t.target.value})},n._handleFormSubmit=function(t){t.preventDefault(),n._submitComment()},n._submitComment=function(){var t=n.state.comment;if(!t)return null;n.props._createPost(t),n.setState({comment:""})},n._submitOnEnter=function(t){"Enter"===t.key&&(t.preventDefault(),n._submitComment())},n}return Object(m.a)(e,t),Object(i.a)(e,[{key:"render",value:function(){var t=this.state.comment,e=this.props,n=e.avatar,a=e.currentUserFirstName;return r.a.createElement("section",{className:C.a.composer},r.a.createElement("section",null,r.a.createElement("img",{src:n}),r.a.createElement("form",{onSubmit:this._handleFormSubmit},r.a.createElement("textarea",{placeholder:"What are you thinking about, ".concat(a),value:t,onChange:this._updateComment,onKeyPress:this._submitOnEnter}),r.a.createElement("input",{type:"submit",value:"Post"}))))}}]),e}(a.Component)),U=n(51),T=n.n(U),A=n(17),B=n.n(A),D=y(function(t){function e(){var t,n;Object(c.a)(this,e);for(var a=arguments.length,s=new Array(a),o=0;o<a;o++)s[o]=arguments[o];return(n=Object(u.a)(this,(t=Object(l.a)(e)).call.apply(t,[this].concat(s)))).state={showLikers:!1},n._showLikers=function(){n.setState({showLikers:!0})},n._hideLikers=function(){n.setState({showLikers:!n.state})},n._likePost=function(){var t=n.props;(0,t._likePost)(t.id)},n._getLikeByMe=function(){var t=n.props,e=t.currentUserFirstName,a=t.currentUserLastName;return t.likes.some(function(t){var n=t.firstName,r=t.lastName;return"".concat(n," ").concat(r)==="".concat(e," ").concat(a)})},n._getLikeStyles=function(){var t=n._getLikeByMe();return g()(B.a.icon,Object(j.a)({},B.a.liked,t))},n._getLikersList=function(){var t=n.state.showLikers,e=n.props.likes,a=e.map(function(t){var e=t.firstName,n=t.lastName,a=t.id;return r.a.createElement("li",{key:a},"".concat(e," ").concat(n))});return e.length&&t?r.a.createElement("ul",null,a):null},n._getLikesDescription=function(){var t=n.props,e=t.currentUserFirstName,a=t.currentUserLastName,r=t.likes,s=n._getLikeByMe();return 1===r.length&&s?"".concat(e," ").concat(a):2===r.length&&s?"You and ".concat(r.length-1," other"):s?"You and ".concat(r.length-1," others"):r.length},n}return Object(m.a)(e,t),Object(i.a)(e,[{key:"render",value:function(){var t=this._getLikeStyles(),e=this._getLikersList(),n=this._getLikesDescription();return r.a.createElement("section",{className:B.a.like},r.a.createElement("span",{className:t,onClick:this._likePost},"Like"),r.a.createElement("div",{className:B.a.showLiker},e,r.a.createElement("span",{onMouseEnter:this._showLikers,onMouseLeave:this.hideLikers},n)))}}]),e}(a.Component)),M=n(29),I=n.n(M),J=y(function(t){function e(){var t,n;Object(c.a)(this,e);for(var a=arguments.length,s=new Array(a),o=0;o<a;o++)s[o]=arguments[o];return(n=Object(u.a)(this,(t=Object(l.a)(e)).call.apply(t,[this].concat(s))))._getCross=function(){var t=n.props,e=t.firstName,a=t.lastName,s=t.currentUserLastName,o=t.currentUserFirstName;return"".concat(e," ").concat(a)==="".concat(o," ").concat(s)?r.a.createElement("span",{className:I.a.cross,onClick:function(){return n.props._removePost(n.props.id)}}):null},n}return Object(m.a)(e,t),Object(i.a)(e,[{key:"render",value:function(){var t=this.props,e=t.comment,n=t.created,a=t._likePost,s=t.id,o=t.likes,c=t.avatar,i=t.firstName,u=t.lastName,l=this._getCross();return r.a.createElement("section",{className:I.a.post},l,r.a.createElement("img",{src:c}),r.a.createElement("a",null," ","".concat(i," ").concat(u)," "),r.a.createElement("time",null,T.a.unix(n).format("MMMM D h:mm:ss a")),r.a.createElement("p",null,e),r.a.createElement(D,{_likePost:a,id:s,likes:o}))}}]),e}(a.Component)),R=n(52),W=n.n(R),z=document.getElementById("spinner"),Y=function(t){function e(){return Object(c.a)(this,e),Object(u.a)(this,Object(l.a)(e).apply(this,arguments))}return Object(m.a)(e,t),Object(i.a)(e,[{key:"render",value:function(){var t=this.props.isSpinning;return Object(s.createPortal)(t?r.a.createElement("div",{className:W.a.spinner}):null,z)}}]),e}(a.Component),G=n(53),X=n.n(G),q=function(t){function e(){var t,n;Object(c.a)(this,e);for(var a=arguments.length,r=new Array(a),s=0;s<a;s++)r[s]=arguments[s];return(n=Object(u.a)(this,(t=Object(l.a)(e)).call.apply(t,[this].concat(r)))).state={error:!1},n}return Object(m.a)(e,t),Object(i.a)(e,[{key:"componentDidCatch",value:function(t,e){console.log("ERROR",t),console.log("STACKTRACE",e.componentStack),this.setState({error:!0})}},{key:"render",value:function(){return this.state.error?r.a.createElement("section",{className:X.a.catcher},r.a.createElement("span",null," A mysterious error occured"),r.a.createElement("p",null,"Our space engineers are fixing that already")):this.props.children}}]),e}(a.Component),K=n(30),Q=n.n(K),$=y(function(t){function e(){var t,n;Object(c.a)(this,e);for(var a=arguments.length,r=new Array(a),s=0;s<a;s++)r[s]=arguments[s];return(n=Object(u.a)(this,(t=Object(l.a)(e)).call.apply(t,[this].concat(r))))._animatePostmanEnter=function(t){Object(d.fromTo)(t,1,{opacity:0,rotationY:-100},{opacity:1,rotationY:0})},n._animatePostmanExit=function(t){Object(d.fromTo)(t,1,{opacity:1,rotationY:-100},{opacity:0,rotation:-360})},n}return Object(m.a)(e,t),Object(i.a)(e,[{key:"render",value:function(){var t=this.props,e=t.avatar,n=t.currentUserFirstName;return r.a.createElement(v.Transition,{in:!0,appear:!0,timeout:5e3,onEntering:this._animatePostmanEnter,onEntered:this._animatePostmanExit},r.a.createElement("section",{className:Q.a.postman},r.a.createElement("img",{src:e,className:Q.a.image}),r.a.createElement("span",null," Wellcome online, ",n)))}}]),e}(a.Component)),H=n(12),V=n.n(H),Z=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1e3;return new Promise(function(e){setTimeout(e,t)})},tt="d1wgjr4rzp",et=function(t,e){if("string"!==typeof t||"string"!==typeof e)throw new Error("'api' and 'GROUP_ID' arguments passed should be a string!");return"".concat(t,"/").concat(e)}("https://lab.lectrum.io/react/api","wcrigmc5r7i8"),nt=y(function(t){function e(){var t,n;Object(c.a)(this,e);for(var a=arguments.length,r=new Array(a),s=0;s<a;s++)r[s]=arguments[s];return(n=Object(u.a)(this,(t=Object(l.a)(e)).call.apply(t,[this].concat(r)))).state={posts:[],isSpinning:!1},n._setPostsFetchingState=function(t){n.setState({isSpinning:t})},n._fetchPosts=Object(_.a)(h.a.mark(function t(){var e,a,r;return h.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return n._setPostsFetchingState(!0),t.next=3,fetch(et,{method:"GET"});case 3:return e=t.sent,t.next=6,e.json();case 6:a=t.sent,r=a.data,n.setState({posts:r,isSpinning:!1});case 9:case"end":return t.stop()}},t,this)})),n._createPost=function(){var t=Object(_.a)(h.a.mark(function t(e){var a,r,s;return h.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return n._setPostsFetchingState(!0),t.next=3,fetch(et,{method:"POST",headers:{"Content-Type":"application/json",Authorization:tt},body:JSON.stringify({comment:e})});case 3:return a=t.sent,t.next=6,a.json();case 6:return r=t.sent,s=r.data,t.next=10,Z(1600);case 10:n.setState(function(t){var e=t.posts;return{posts:[s].concat(Object(p.a)(e)),isSpinning:!1}});case 11:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}(),n._likePost=function(){var t=Object(_.a)(h.a.mark(function t(e){var a,r,s;return h.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return n._setPostsFetchingState(!0),t.next=3,fetch("".concat(et,"/").concat(e),{method:"PUT",headers:{Authorization:tt}});case 3:return a=t.sent,t.next=6,a.json();case 6:r=t.sent,s=r.data,n.setState(function(t){return{posts:t.posts.map(function(t){return t.id===s.id?s:t}),isSpinning:!1}});case 9:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}(),n._removePost=function(){var t=Object(_.a)(h.a.mark(function t(e){return h.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return n._setPostsFetchingState(!0),t.next=3,fetch("".concat(et,"/").concat(e),{method:"DELETE",headers:{Authorization:tt}});case 3:t.sent,n.setState(function(t){return{posts:t.posts.filter(function(t){return t.id!==e}),isSpinning:!1}});case 5:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}(),n._animateComposerEnter=function(t){Object(d.fromTo)(t,1,{opacity:0,rotationX:50},{opacity:1,rotationX:0})},n}return Object(m.a)(e,t),Object(i.a)(e,[{key:"componentDidMount",value:function(){var t=this,e=this.props,n=e.currentUserFirstName,a=e.currentUserLastName;this._fetchPosts(),L.emit("join","wcrigmc5r7i8"),L.on("create",function(e){var r=JSON.parse(e),s=r.data,o=r.meta;"".concat(n," ").concat(a)!=="".concat(o.authorFirstName," ").concat(o.authorLastName)&&t.setState(function(t){var e=t.posts;return{posts:[s].concat(Object(p.a)(e))}})}),L.on("remove",function(e){var r=JSON.parse(e),s=r.data,o=r.meta;"".concat(n," ").concat(a)!=="".concat(o.authorFirstName," ").concat(o.authorLastName)&&t.setState(function(t){return{posts:t.posts.filter(function(t){return t.id!==s.id})}})}),L.on("like",function(e){var r=JSON.parse(e),s=r.data,o=r.meta;"".concat(n," ").concat(a)!=="".concat(o.authorFirstName," ").concat(o.authorLastName)&&t.setState(function(t){return{posts:t.posts.map(function(t){return t.id===s.id?s:t})}})})}},{key:"componentWillUnMount",value:function(){L.removeListener("create"),L.removeListener("remove"),L.removeListener("like")}},{key:"render",value:function(){var t=this,e=this.state,n=e.posts,a=e.isSpinning,s=n.map(function(e){return r.a.createElement(v.CSSTransition,{classNames:{enter:V.a.postInStart,enterActive:V.a.postInEnd,exit:V.a.postOutStart,exitActive:V.a.postOutEnd},key:e.id,timeout:{enter:500,exit:400}},r.a.createElement(q,null,r.a.createElement(J,Object.assign({},e,{_likePost:t._likePost,_removePost:t._removePost}))))});return r.a.createElement("section",{className:V.a.feed},r.a.createElement(Y,{isSpinning:a}),r.a.createElement(P,null),r.a.createElement(v.Transition,{in:!0,appear:!0,timeout:2e3,onEnter:this._animateComposerEnter},r.a.createElement(F,{_createPost:this._createPost})),r.a.createElement($,null),r.a.createElement(v.TransitionGroup,null,s))}}]),e}(a.Component)),at=(n(110),n(54)),rt={avatar:n.n(at).a,currentUserFirstName:"\u042e\u043b\u0438\u044f",currentUserLastName:"\u041c\u0430\u043a\u0430\u0440\u0447\u0443\u043a"},st=function(t){function e(){return Object(c.a)(this,e),Object(u.a)(this,Object(l.a)(e).apply(this,arguments))}return Object(m.a)(e,t),Object(i.a)(e,[{key:"render",value:function(){return r.a.createElement(q,null,r.a.createElement(O,{value:rt},r.a.createElement(nt,null)))}}]),e}(a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(r.a.createElement(st,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(t){t.unregister()})},12:function(t,e,n){t.exports={feed:"styles_feed__2RQ-o",postInStart:"styles_postInStart__rP40t",postInEnd:"styles_postInEnd__1DPEx",postOutStart:"styles_postOutStart__10Ifx",postOutEnd:"styles_postOutEnd__1xJzk"}},16:function(t,e,n){t.exports={statusBar:"styles_statusBar__2DNnl",status:"styles_status__2aG0U",online:"styles_online__eO62a",offline:"styles_offline__1vofJ"}},17:function(t,e,n){t.exports={like:"styles_like__2E9oa",icon:"styles_icon__R7fu2",liked:"styles_liked__2Bqjd",showLiker:"styles_showLiker__2It0s"}},29:function(t,e,n){t.exports={post:"styles_post__10vqr",cross:"styles_cross__1dr5E"}},30:function(t,e,n){t.exports={postman:"styles_postman__boiJP",image:"styles_image__1CMpD"}},50:function(t,e,n){t.exports={composer:"styles_composer__1FwBx"}},52:function(t,e,n){t.exports={spinner:"styles_spinner__25Apx"}},53:function(t,e,n){t.exports={catcher:"styles_catcher__3cFX1"}},54:function(t,e,n){t.exports=n.p+"static/media/lisa.c0366208.png"},55:function(t,e,n){t.exports=n(115)},60:function(t,e,n){},99:function(t,e){}},[[55,2,1]]]);
//# sourceMappingURL=main.8b39c175.chunk.js.map